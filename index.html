<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Ha-Meem Textile Zone | Digital Reporting System</title>
  <style>
    body {
      font-family: 'Segoe UI', sans-serif;
      background-color: #1a1a1a;
      color: white;
      margin: 0;
      padding: 0;
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      align-items: center;
    }
    nav {
      width: 100%;
      background-color: #222;
      padding: 15px;
      text-align: center;
      font-size: 22px;
      font-weight: bold;
      box-shadow: 0 4px 6px rgba(0,0,0,0.3);
      position: sticky;
      top: 0;
      z-index: 1000;
    }
    .button-container, .unit-buttons, .tab-buttons {
      margin: 20px;
      display: flex;
      flex-wrap: wrap;
      gap: 15px;
      justify-content: center;
    }
    button, .tab {
      background-color: #4caf50;
      border: none;
      border-radius: 8px;
      color: white;
      padding: 14px 22px;
      font-size: 16px;
      cursor: pointer;
      transition: background-color 0.3s;
    }
    button:hover, .tab:hover {
      background-color: #388e3c;
    }
    .tab.active {
      background-color: #1e88e5;
    }
    iframe {
      width: 95vw;
      height: 80vh;
      border: none;
      border-radius: 12px;
      box-shadow: 0 0 15px rgba(0,255,0,0.7);
      margin: 20px 0;
    }
    #floatingBackBtn {
      position: fixed;
      top: 80px;
      right: 20px;
      background-color: #4caf50;
      border: none;
      border-radius: 8px;
      padding: 10px 20px;
      color: white;
      font-size: 16px;
      cursor: pointer;
      z-index: 2000;
      transition: background-color 0.3s;
      display: none;
    }
    #floatingBackBtn:hover {
      background-color: #388e3c;
    }
    #logoutBtn {
      position: fixed;
      top: 80px;
      left: 20px;
      background-color: #e91e63;
      border: none;
      border-radius: 8px;
      padding: 10px 20px;
      color: white;
      font-size: 16px;
      cursor: pointer;
      z-index: 2000;
      display: none;
    }
    #logoutBtn:hover {
      background-color: #c2185b;
    }
    h1 {
      margin-top: 20px;
      color: #ffc107;
      text-align: center;
    }
    #login-screen {
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      height: 100vh;
      width: 100%;
      position: absolute;
      top: 0;
      left: 0;
      background: #1a1a1a;
      z-index: 3000;
    }
    #login-screen input {
      padding: 10px;
      margin: 10px;
      border-radius: 5px;
      border: none;
      font-size: 16px;
      width: 250px;
    }
    #login-screen button {
      padding: 10px 20px;
      background-color: #4caf50;
      border: none;
      border-radius: 8px;
      color: white;
      font-size: 16px;
      cursor: pointer;
    }
    #login-screen p {
      color: tomato;
      margin-top: 15px;
    }

    #loading-message {
      margin-top: 20px;
      font-size: 16px;
      color: #aaa;
      text-align: center;
      display: none;
    }

    @media screen and (max-width: 768px) {
      iframe {
        height: 70vh;
      }
      button, .tab {
        font-size: 15px;
        padding: 12px 18px;
      }
    }
  </style>
</head>
<body>

<nav>üìä Ha-Meem Textile Zone | Digital Reporting System</nav>

<div id="login-screen">
  <h2 style="color:white; margin-bottom:10px;">üîê Ha-Meem Textile Zone</h2>
  <h3 style="color: #ccc; margin-bottom: 20px;">Digital Reporting System</h3>
  <input id="username" placeholder="Username" />
  <input id="password" type="password" placeholder="Password" />
  <button onclick="login()">Login</button>
  <p id="login-error"></p>
</div>

<div id="home-view" style="display: none;">
  <h1>Select a Unit</h1>
  <div class="unit-buttons">
    <button onclick="showUnit('denim')">üëñ Denim</button>
    <button onclick="showUnit('textile')">üßµ Textile</button>
    <button onclick="showUnit('spinning')">üß∂ Spinning</button>
    <button onclick="showUnit('rotor')">üîÑ Rotor</button>
    <button onclick="showUnit('recycle')">‚ôªÔ∏è Recycle</button>
  </div>
</div>

<div id="report-view" style="display: none; flex-direction: column; align-items: center; width: 100%;">
  <h1 id="unit-title"></h1>
  <div class="tab-buttons">
    <div class="tab" onclick="loadReport(currentUnit, 'production', this)">üè≠ Production</div>
    <div class="tab" onclick="loadReport(currentUnit, 'manpower', this)">üë®‚Äçüè≠ Manpower</div>
    <div class="tab" onclick="loadReport(currentUnit, 'stock', this)">üì¶ Stock</div>
  </div>
  <div id="loading-message">‚è≥ Loading report‚Ä¶ Please wait</div>
  <iframe id="report-frame" style="display:none;" allowfullscreen sandbox="allow-same-origin allow-scripts allow-popups allow-storage-access-by-user-activation"></iframe>
</div>

<button id="floatingBackBtn" onclick="backToHome()">üîô Back to Home</button>
<button id="logoutBtn" onclick="logout()">üö™ Logout</button>

<script>
  let currentUnit = '';

  const reportURLs = {
    production: {
      denim: 'https://lookerstudio.google.com/embed/reporting/dd113d66-d94c-4aaf-a6f0-2379d08f6086/page/p_8kylhg96od',
      textile: 'https://lookerstudio.google.com/embed/reporting/a7657409-ddb4-492f-a14d-caad44c3590f/page/p_nr13f7y6od',
      spinning: 'https://lookerstudio.google.com/embed/reporting/67f6efad-80f9-4880-b055-1ea4d92909bd/page/VKJlE',
      rotor: 'https://lookerstudio.google.com/embed/reporting/6e85c9c5-36f9-4e2f-b629-00cafc96f841/page/VKJlE',
      recycle: ''
    },
    manpower: 'https://lookerstudio.google.com/embed/reporting/a3d59acc-9783-4e6d-868b-4a0b67ae6b61/page/p_rhi416b8rd',
    stock: 'https://lookerstudio.google.com/embed/reporting/2482ac5e-fe5f-4427-9c2f-5ec726c868ca/page/p_7zfn5895rd'
  };

  function showUnit(unit) {
    currentUnit = unit;
    document.getElementById('home-view').style.display = 'none';
    document.getElementById('report-view').style.display = 'flex';
    document.getElementById('unit-title').textContent = getUnitTitle(unit);
    document.getElementById('floatingBackBtn').style.display = 'block';
    const firstTab = document.querySelector('.tab-buttons .tab');
    loadReport(unit, 'production', firstTab);
  }

  function loadReport(unit, type, element) {
    const iframe = document.getElementById('report-frame');
    const loading = document.getElementById('loading-message');

    document.querySelectorAll('.tab').forEach(tab => tab.classList.remove('active'));
    if (element) element.classList.add('active');

    loading.style.display = 'block';
    iframe.style.display = 'none';

    let url = (type === 'manpower' || type === 'stock') ? reportURLs[type] : reportURLs[type][unit] || '';
    iframe.src = '';

    setTimeout(() => {
      iframe.src = url;
    }, 300); // slight delay before load

    iframe.onload = () => {
      loading.style.display = 'none';
      iframe.style.display = 'block';
    };
  }

  function backToHome() {
    document.getElementById('report-frame').src = '';
    document.getElementById('report-view').style.display = 'none';
    document.getElementById('home-view').style.display = 'block';
    document.getElementById('floatingBackBtn').style.display = 'none';
    document.getElementById('loading-message').style.display = 'none';
    document.getElementById('report-frame').style.display = 'none';
  }

  function getUnitTitle(unit) {
    switch (unit) {
      case 'denim': return 'üëñ Ha-Meem Denim Ltd';
      case 'textile': return 'üßµ Ha-Meem Textile Ltd';
      case 'spinning': return 'üß∂ Ha-Meem Spinning Ltd';
      case 'rotor': return 'üîÑ Ha-Meem Rotor Ltd';
      case 'recycle': return '‚ôªÔ∏è Ha-Meem Recycle Ltd';
      default: return 'Ha-Meem Reports';
    }
  }

  function login() {
    const user = document.getElementById('username').value;
    const pass = document.getElementById('password').value;
    if (user === 'HTZ' && pass === '1230') {
      document.getElementById('login-screen').style.display = 'none';
      document.getElementById('home-view').style.display = 'block';
      document.getElementById('logoutBtn').style.display = 'block';
    } else {
      document.getElementById('login-error').innerText = 'Invalid username or password';
    }
  }

  function logout() {
    document.getElementById('username').value = '';
    document.getElementById('password').value = '';
    document.getElementById('login-error').innerText = '';
    document.getElementById('login-screen').style.display = 'flex';
    document.getElementById('home-view').style.display = 'none';
    document.getElementById('report-view').style.display = 'none';
    document.getElementById('report-frame').src = '';
    document.getElementById('floatingBackBtn').style.display = 'none';
    document.getElementById('logoutBtn').style.display = 'none';
  }
</script>

</body>
</html>
